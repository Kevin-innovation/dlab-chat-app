# Next.js Firebase 실시간 채팅 앱

이 프로젝트는 Next.js와 Firebase를 사용하여 개발된 실시간 채팅 애플리케이션입니다. 별도의 회원가입 없이 닉네임만으로 참여할 수 있는 채팅 서비스를 제공합니다.

## 배포 주소
브라우저에서 [chat-app-zeta-plum.vercel.app](https://chat-app-zeta-plum.vercel.app)으로 접속

## 공지사항
- 닉네임 생성시 학생 본인 이름을 꼭 입력해 주세요

## 기술 스택

- **프론트엔드**: Next.js 14 (App Router), React, TypeScript, Tailwind CSS
- **백엔드**: Firebase (Firestore, Authentication)
- **배포**: Vercel

## 주요 기능

### 1. 사용자 관리
- **닉네임 기반 참여**: 사용자는 별도의 회원가입 없이 닉네임만으로 채팅에 참여할 수 있습니다.
- 관리자 인증 및 권한 관리
- 사용자 목록 조회 및 관리

### 2. 채팅방 관리
- 채팅방 생성 및 목록 조회
- 비밀번호로 보호된 채팅방 기능
- 채팅방 설정 변경 (이름, 비밀번호)
- 공지사항 관리 (작성, 수정, 삭제)

### 3. 참여자 관리
- 참여자 목록 조회
- 관리자가 참여자 강제 퇴장 기능
- 참여자 상태 실시간 업데이트

### 4. 메시지 기능
- **실시간 메시지 전송**: Firebase Firestore를 활용한 실시간 메시지 전송 및 수신 기능을 제공합니다.
- 시스템 메시지 표시
- 관리자의 메시지 삭제 기능

### 5. 보안 기능
- 관리자 비밀번호 인증
- 참여자 권한 검증 (3중 보호 장치)
- Firebase Security Rules 적용

## 프로젝트 구조

```
chat-app/
├── public/              # 정적 파일
├── src/                 # 소스 코드
│   ├── app/            
│   │   ├── chat/        # 채팅 관련 페이지
│   │   │   ├── [id]/    # 개별 채팅방 페이지
│   │   │   ├── new/     # 새 채팅방 생성 페이지
│   │   │   └── page.tsx # 채팅방 목록 페이지
│   │   ├── globals.css  # 전역 스타일
│   │   ├── layout.tsx   # 앱 레이아웃
│   │   └── page.tsx     # 메인 페이지 (닉네임 입력)
│   ├── context/         
│   │   └── UserContext.tsx # 사용자 정보 관리
│   ├── lib/             
│   │   ├── firebase.ts  # Firebase 설정
│   │   └── utils.ts     # 유틸리티 함수
│   └── components/      # 재사용 가능한 컴포넌트
├── tailwind.config.js   # Tailwind CSS 설정
└── package.json         # 프로젝트 의존성
```

## 개발 프로세스

### 1단계: 기본 기능 구현
- 사용자 로그인/로그아웃 기능
- 채팅방 목록 및 생성 기능
- 기본 채팅 기능 구현

### 2단계: 관리자 기능 추가
- 관리자 권한 인증 시스템
- 사용자 관리 기능
- 메시지 삭제 기능

### 3단계: 공지사항 기능
- 채팅방별 공지사항 추가
- 공지사항 수정/삭제 기능

### 4단계: 채팅방 관리 기능 강화
- 참여자 목록 보기 기능
- 참여자 강제 퇴장 기능
- 채팅방 설정 변경 기능
- 비밀번호 보호 기능

### 5단계: 보안 강화
- 참여자 권한 검증 메커니즘 구현
- 퇴장된 사용자 접근 제한
- 실시간 참여자 상태 모니터링
- Firebase Security Rules 적용

## 문제 해결 과정

### 1. 참여자 관리 문제
- **문제**: 채팅방에서 퇴장된 사용자가 여전히 메시지를 보낼 수 있었음
- **해결**: 
  1. 클라이언트 측 검증: UI에서 참여자가 아닌 경우 입력 차단
  2. 서버 측 검증: 메시지 전송 전 참여자 상태 재확인
  3. 자동 리다이렉트: 퇴장된 사용자 자동으로 채팅방에서 이동
  4. Firebase Security Rules: 서버에서 참여자 검증 강화

### 2. 공지사항 관리
- **문제**: 공지사항에 작성자와 날짜 정보가 불필요하게 표시됨
- **해결**: 공지사항 데이터 구조 수정하여 필수 정보만 표시

### 3. UI/UX 개선
- **문제**: 채팅방 관리 버튼이 일부 환경에서 보이지 않음
- **해결**: 레이아웃 및 스타일 조정으로 일관된 UI 제공

## 설치 및 실행 방법

1. 저장소 클론:
   ```bash
   git clone <repository-url>
   cd chat-app
   ```

2. 의존성 설치:
   ```bash
   npm install
   ```

3. 개발 서버 실행:
   ```bash
   npm run dev
   ```

4. 브라우저에서 `http://localhost:3000`으로 접속

## 여러 사용자로 테스트하는 방법

1. **다른 브라우저 사용**: 각각 다른 브라우저(예: Chrome, Safari, Firefox)에서 애플리케이션을 열어 서로 다른 사용자로 테스트할 수 있습니다.
2. **시크릿 모드 사용**: 같은 브라우저에서 일반 창과 시크릿 창을 동시에 열어 서로 다른 사용자로 테스트할 수 있습니다.
3. **다른 기기 사용**: 개발 서버를 실행 중인 컴퓨터의 로컬 IP 주소를 사용하여 같은 네트워크에 있는 다른 기기(스마트폰, 태블릿 등)에서 접속할 수 있습니다.
   개발 서버 실행 시 콘솔에 표시되는 로컬 IP 주소로 접속하세요. 예: `http://192.168.1.100:3000`

## 관리자 모드 사용 방법

1. 채팅방 목록 페이지에서 오른쪽 하단의 "관리자 모드" 버튼을 클릭합니다.
2. 비밀번호 입력 창이 나타나면 "****"을 입력합니다.
3. 성공적으로 로그인하면 다음 기능을 사용할 수 있습니다:
   - 채팅방 목록 페이지에서 각 채팅방의 삭제 버튼을 클릭하여 채팅방 삭제
   - 개별 채팅방 내에서 메시지 옆에 있는 삭제 버튼을 클릭하여 메시지 삭제
   - 사용자 강제 퇴장 기능
   - 공지사항 관리 기능

## 배포

애플리케이션은 Vercel을 통해 배포되었으며, 다음 URL에서 접근 가능합니다:
[chat-app-zeta-plum.vercel.app](https://chat-app-zeta-plum.vercel.app)

## 배운 점

1. **Next.js 14 App Router**: 새로운 App Router를 사용한 라우팅 시스템 구현 방법
2. **Firebase Firestore**: NoSQL 데이터베이스를 활용한 실시간 데이터 처리 방법
3. **React Context API**: 전역 상태 관리 방법
4. **TypeScript**: 타입 안전성을 확보한 개발 방법
5. **Tailwind CSS**: 유틸리티 우선 CSS 프레임워크를 사용한 반응형 디자인 구현
6. **보안 관리**: Firebase Security Rules를 활용한 보안 강화 방법
